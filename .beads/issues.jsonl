{"id":"evodb-bka","title":"P2 Code Quality: Consistency & Testing","description":"Epic for P2 code quality improvements: workspace dependencies, test utilities, E2E integration, and documentation alignment.","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-20T10:27:45.292472-06:00","updated_at":"2026-01-20T16:57:32Z","external_ref":"gh-1"}
{"id":"evodb-bka.1","title":"Standardize workspace dependencies to workspace:*","description":"Query and benchmark packages use file:../core instead of workspace:*.\n\nThis causes version resolution inconsistencies and breaks pnpm workspace linking.\n\nUpdate all internal dependencies to use workspace:* syntax.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T10:29:52.350283-06:00","updated_at":"2026-01-20T10:35:25.702079-06:00","closed_at":"2026-01-20T10:35:25.702079-06:00","close_reason":"Closed","external_ref":"gh-2","dependencies":[{"issue_id":"evodb-bka.1","depends_on_id":"evodb-bka","type":"parent-child","created_at":"2026-01-20T10:29:52.351072-06:00","created_by":"Nathan Clevenger"}]}
{"id":"evodb-bka.2","title":"Extract mock data to test utilities package","description":"Query engine has ~200 lines of mock data generation in production code (initializeMockData).\n\nExtract to a separate @evodb/test-utils package or test fixtures directory.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T10:29:58.909741-06:00","updated_at":"2026-01-20T10:47:09.386895-06:00","closed_at":"2026-01-20T10:47:09.386895-06:00","close_reason":"Closed","external_ref":"gh-3","dependencies":[{"issue_id":"evodb-bka.2","depends_on_id":"evodb-bka","type":"parent-child","created_at":"2026-01-20T10:29:58.910607-06:00","created_by":"Nathan Clevenger"}]}
{"id":"evodb-bka.3","title":"Add E2E integration test with real R2","description":"No complete 'write data -> query data' example that actually works.\n\nCreate E2E test that:\n1. Writes CDC entries via writer\n2. Flushes to R2 (or miniflare mock)\n3. Queries back via reader\n4. Validates round-trip","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T10:30:04.930966-06:00","updated_at":"2026-01-20T10:40:30.070145-06:00","closed_at":"2026-01-20T10:40:30.070145-06:00","close_reason":"Closed","external_ref":"gh-4","dependencies":[{"issue_id":"evodb-bka.3","depends_on_id":"evodb-bka","type":"parent-child","created_at":"2026-01-20T10:30:04.931612-06:00","created_by":"Nathan Clevenger"}]}
{"id":"evodb-bka.4","title":"Make snippets-lance import from lance-reader","description":"snippets-lance duplicates vector math from lance-reader:\n- normalizeVector, computeL2Distance duplicated\n- CachedLanceReader doesn't use lance-reader\n\nDRY violation - add proper dependency and imports.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2026-01-20T10:30:11.14332-06:00","updated_at":"2026-01-20T10:34:38.195678-06:00","dependencies":[{"issue_id":"evodb-bka.4","depends_on_id":"evodb-bka","type":"parent-child","created_at":"2026-01-20T10:30:11.143943-06:00","created_by":"Nathan Clevenger"}]}
{"id":"evodb-bka.5","title":"Replace magic numbers with named constants","description":"Multiple magic numbers in snippets-lance for binary format sizes.\n\nExtract to named constants for readability and maintainability:\n- Header sizes\n- Offset calculations\n- Buffer sizes","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T10:30:15.175353-06:00","updated_at":"2026-01-20T10:44:56.629044-06:00","closed_at":"2026-01-20T10:44:56.629044-06:00","close_reason":"Closed","dependencies":[{"issue_id":"evodb-bka.5","depends_on_id":"evodb-bka","type":"parent-child","created_at":"2026-01-20T10:30:15.176005-06:00","created_by":"Nathan Clevenger"}]}
{"id":"evodb-bka.6","title":"Add exhaustiveness check to codegen switch statements","description":"Switch statements in codegen (diff.ts, generator.ts) missing exhaustiveness checks.\n\nAdd assertNever() in default cases to catch unhandled enum values at compile time.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-20T10:30:19.356286-06:00","updated_at":"2026-01-20T16:57:35Z","external_ref":"gh-7"}
{"id":"evodb-bka.7","title":"Add input validation to codegen CLI JSON parsing","description":"CLI in codegen/src/cli.ts parses JSON from files without validation.\n\nMalformed JSON could cause confusing errors. Add proper validation with helpful error messages.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T10:30:22.771411-06:00","updated_at":"2026-01-20T10:41:09.358434-06:00","closed_at":"2026-01-20T10:41:09.358434-06:00","close_reason":"Closed","dependencies":[{"issue_id":"evodb-bka.7","depends_on_id":"evodb-bka","type":"parent-child","created_at":"2026-01-20T10:30:22.772008-06:00","created_by":"Nathan Clevenger"}]}
{"id":"evodb-bka.8","title":"Implement actual bloom filter instead of Map simulation","description":"BloomFilterManager in query engine uses Map<string, Set<string>> instead of actual bloom filter bit arrays.\n\nImplement proper bloom filter for space efficiency and probabilistic behavior.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T10:30:25.934737-06:00","updated_at":"2026-01-20T10:47:08.208649-06:00","closed_at":"2026-01-20T10:47:08.208649-06:00","close_reason":"Closed","dependencies":[{"issue_id":"evodb-bka.8","depends_on_id":"evodb-bka","type":"parent-child","created_at":"2026-01-20T10:30:25.93552-06:00","created_by":"Nathan Clevenger"}]}
{"id":"evodb-bka.9","title":"Define QueryExecutor interface for reader/query unification","description":"reader and query packages both implement query execution but don't share an interface.\n\nDefine QueryExecutor interface in core that both implement for consistency.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T10:30:29.744773-06:00","updated_at":"2026-01-20T10:43:06.407675-06:00","closed_at":"2026-01-20T10:43:06.407675-06:00","close_reason":"Closed","dependencies":[{"issue_id":"evodb-bka.9","depends_on_id":"evodb-bka","type":"parent-child","created_at":"2026-01-20T10:30:29.745313-06:00","created_by":"Nathan Clevenger"}]}
{"id":"evodb-hyt","title":"P1 Architecture: Scalability & Design","description":"Epic for P1 architectural issues: writer sharding, strategy pattern completion, type unification, and memory leak fixes.","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-20T10:27:42.264128-06:00","updated_at":"2026-01-20T16:57:38Z","external_ref":"gh-11"}
{"id":"evodb-hyt.1","title":"Implement writer DO sharding for horizontal scaling","description":"All CDC streams funnel through a single Parent DO, creating a bottleneck at scale.\n\nImplement hash-based writer sharding:\n- Hash(tenant/table) -> Writer DO Shard N -> R2\n- Partition assignment logic\n- Shard discovery for readers\n\nThis is critical for scaling beyond single-DO throughput.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-20T10:28:57.444008-06:00","updated_at":"2026-01-20T10:43:33.670077-06:00","closed_at":"2026-01-20T10:43:33.670077-06:00","close_reason":"Closed","dependencies":[{"issue_id":"evodb-hyt.1","depends_on_id":"evodb-hyt","type":"parent-child","created_at":"2026-01-20T10:28:57.444546-06:00","created_by":"Nathan Clevenger"}]}
{"id":"evodb-hyt.2","title":"Complete strategy pattern migration in writer","description":"LakehouseWriter maintains BOTH legacy components AND strategy implementations:\n- bufferStrategy + buffer (duplicate)\n- blockWriter + r2Writer (duplicate)\n- compactionStrategy + compactor (duplicate)\n\nBoth must be kept in sync (line 296-297). Remove legacy components, complete migration to strategy pattern.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-20T10:29:04.648686-06:00","updated_at":"2026-01-20T10:39:27.679335-06:00","closed_at":"2026-01-20T10:39:27.679335-06:00","close_reason":"Closed","dependencies":[{"issue_id":"evodb-hyt.2","depends_on_id":"evodb-hyt","type":"parent-child","created_at":"2026-01-20T10:29:04.649266-06:00","created_by":"Nathan Clevenger"}]}
{"id":"evodb-hyt.3","title":"Unify type definitions across packages","description":"Schema and WalEntry are defined differently across packages:\n\nCore Schema: { id, version, parentVersion, columns }\nLakehouse Schema: { schemaId, version, columns, createdAt }\n\nRPC WalEntry: { sequence: number, timestamp: number, operation }\nCore WalEntry: { lsn: bigint, timestamp: bigint, op }\n\nCreate single source of truth for these types.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-20T10:29:09.739484-06:00","updated_at":"2026-01-20T10:50:19.923324-06:00","closed_at":"2026-01-20T10:50:19.923324-06:00","close_reason":"Closed","dependencies":[{"issue_id":"evodb-hyt.3","depends_on_id":"evodb-hyt","type":"parent-child","created_at":"2026-01-20T10:29:09.740111-06:00","created_by":"Nathan Clevenger"}]}
{"id":"evodb-hyt.4","title":"Fix memory leak in edge-cache access pattern tracking","description":"In edge-cache/src/cache-aware-planner.ts, access pattern tracking is unbounded and can grow indefinitely.\n\nAdd LRU eviction or time-based cleanup to prevent memory exhaustion under sustained load.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-20T10:29:13.275023-06:00","updated_at":"2026-01-20T10:45:07.940607-06:00","closed_at":"2026-01-20T10:45:07.940607-06:00","close_reason":"Closed","dependencies":[{"issue_id":"evodb-hyt.4","depends_on_id":"evodb-hyt","type":"parent-child","created_at":"2026-01-20T10:29:13.275548-06:00","created_by":"Nathan Clevenger"}]}
{"id":"evodb-hyt.5","title":"Fix unbounded allocation from untrusted headers in snippets-lance","description":"In snippets-lance, lookup table allocation uses sizes from file headers without validation.\n\nA malicious or corrupted file could cause OOM by specifying huge allocation sizes.\n\nAdd bounds checking before allocation.","status":"in_progress","priority":1,"issue_type":"task","created_at":"2026-01-20T10:29:17.281398-06:00","updated_at":"2026-01-20T10:33:49.713025-06:00","dependencies":[{"issue_id":"evodb-hyt.5","depends_on_id":"evodb-hyt","type":"parent-child","created_at":"2026-01-20T10:29:17.282032-06:00","created_by":"Nathan Clevenger"}]}
{"id":"evodb-hyt.6","title":"Add missing error propagation in edge-cache background prefetch","description":"Background prefetch errors in edge-cache are silently swallowed.\n\nAdd proper error logging/propagation so prefetch failures are visible for debugging.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-20T10:29:20.96063-06:00","updated_at":"2026-01-20T10:46:31.522859-06:00","closed_at":"2026-01-20T10:46:31.522859-06:00","close_reason":"Closed","dependencies":[{"issue_id":"evodb-hyt.6","depends_on_id":"evodb-hyt","type":"parent-child","created_at":"2026-01-20T10:29:20.962733-06:00","created_by":"Nathan Clevenger"}]}
{"id":"evodb-hyt.7","title":"Fix non-null assertion abuse in snippets-lance","description":"Multiple non-null assertions (!) in production code that could cause runtime errors:\n- snippets-vector-search.ts line 339: this.partitionMeta![partitionId]\n- cached-lance-reader.ts: various metadata accesses\n\nReplace with proper null checks or early returns.","status":"in_progress","priority":1,"issue_type":"task","created_at":"2026-01-20T10:29:24.554455-06:00","updated_at":"2026-01-20T10:33:51.398532-06:00","dependencies":[{"issue_id":"evodb-hyt.7","depends_on_id":"evodb-hyt","type":"parent-child","created_at":"2026-01-20T10:29:24.555439-06:00","created_by":"Nathan Clevenger"}]}
{"id":"evodb-lpv","title":"P0 Critical: Foundation & Safety","description":"Epic for P0 critical issues blocking MVP: missing tests, facade class, mock data removal, and type safety fixes. These must be resolved before any release.","status":"open","priority":0,"issue_type":"epic","created_at":"2026-01-20T10:27:30.503365-06:00","updated_at":"2026-01-20T10:27:30.503365-06:00"}
{"id":"evodb-lpv.1","title":"TDD: Add tests for snippets-chain package","description":"snippets-chain has 9 source files with 0 tests. Critical gap - complex orchestration logic (ChainBuilder, ChainExecutor) completely untested.\n\nFiles needing tests:\n- chain-builder.ts (16KB) - fluent API with validation\n- executor.ts (19KB) - parallel execution, timeouts, resource tracking\n- patterns/ - map-reduce, pipeline, scatter-gather\n\nWrite tests using TDD red-green-refactor approach.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-20T10:28:14.835501-06:00","updated_at":"2026-01-20T10:46:10.787287-06:00","closed_at":"2026-01-20T10:46:10.787287-06:00","close_reason":"Closed","dependencies":[{"issue_id":"evodb-lpv.1","depends_on_id":"evodb-lpv","type":"parent-child","created_at":"2026-01-20T10:28:14.836131-06:00","created_by":"Nathan Clevenger"}]}
{"id":"evodb-lpv.2","title":"Create EvoDB facade class matching README API","description":"The README shows an API that doesn't exist:\n- new EvoDB({ mode, storage })\n- db.insert('users', {...})\n- db.query('users').where(...).select(...)\n- db.schema.lock()\n- db.schema.relate()\n- db.schema.enforce()\n\nCreate the actual EvoDB class in @evodb/core that wraps existing primitives and provides this high-level API.","status":"open","priority":0,"issue_type":"task","created_at":"2026-01-20T10:28:18.567637-06:00","updated_at":"2026-01-20T16:57:44Z","external_ref":"gh-21"}
{"id":"evodb-lpv.3","title":"Remove mock data from query engine","description":"Query engine (query/src/engine.ts lines 1131-1355) contains heavy mock data initialization with initializeMockData() generating fake users, orders, events.\n\nThe parseColumnarData method acknowledges 'In a real implementation, this would parse the columnar format' and returns mock data.\n\nRemove all mock data and connect to actual R2 columnar blocks.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-20T10:28:22.008557-06:00","updated_at":"2026-01-20T10:57:23.555924-06:00","closed_at":"2026-01-20T10:57:23.555924-06:00","close_reason":"Removed mock data from QueryEngine by implementing TableDataSource abstraction pattern. MockDataSource now contains all test data, while R2DataSource provides the integration point for production R2 bucket access.","dependencies":[{"issue_id":"evodb-lpv.3","depends_on_id":"evodb-lpv","type":"parent-child","created_at":"2026-01-20T10:28:22.009159-06:00","created_by":"Nathan Clevenger"}]}
{"id":"evodb-lpv.4","title":"Fix BigInt to Number precision loss in snippets-lance","description":"In snippets-lance/src/cached-lance-reader.ts, BigInt values are converted to Number for file offsets, causing precision loss for large files (>2^53 bytes).\n\nThis can cause data corruption or incorrect reads for large vector indices.\n\nFix by keeping BigInt throughout the read path or using safe conversion with bounds checking.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-20T10:28:25.006065-06:00","updated_at":"2026-01-20T10:51:21.434359-06:00","closed_at":"2026-01-20T10:51:21.434359-06:00","close_reason":"Closed","dependencies":[{"issue_id":"evodb-lpv.4","depends_on_id":"evodb-lpv","type":"parent-child","created_at":"2026-01-20T10:28:25.006739-06:00","created_by":"Nathan Clevenger"}]}
{"id":"evodb-lpv.5","title":"Fix potential SQL injection in query engine","description":"In query/src/engine.ts, if column names come from user input, there's potential for SQL-like injection attacks.\n\nReview all places where column names are used in query construction and add proper validation/escaping.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-20T10:28:28.891416-06:00","updated_at":"2026-01-20T10:43:42.971491-06:00","closed_at":"2026-01-20T10:43:42.971491-06:00","close_reason":"Closed","dependencies":[{"issue_id":"evodb-lpv.5","depends_on_id":"evodb-lpv","type":"parent-child","created_at":"2026-01-20T10:28:28.892002-06:00","created_by":"Nathan Clevenger"}]}
{"id":"evodb-v38","title":"P3 Polish: Developer Experience","description":"Epic for P3 nice-to-have improvements: console logging cleanup, documentation, and minor type improvements.","status":"open","priority":3,"issue_type":"epic","created_at":"2026-01-20T10:27:48.995-06:00","updated_at":"2026-01-20T10:27:48.995-06:00","external_ref":"gh-25"}
{"id":"evodb-v38.1","title":"Remove console.log from library code","description":"edge-cache has console logging in library code.\n\nRemove or replace with proper logging interface that can be configured/disabled.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-20T10:30:50.455873-06:00","updated_at":"2026-01-20T10:41:07.903495-06:00","closed_at":"2026-01-20T10:41:07.903495-06:00","close_reason":"Closed","dependencies":[{"issue_id":"evodb-v38.1","depends_on_id":"evodb-v38","type":"parent-child","created_at":"2026-01-20T10:30:50.456498-06:00","created_by":"Nathan Clevenger"}]}
{"id":"evodb-v38.2","title":"Fix cross-package relative imports in codegen","description":"Codegen has cross-package relative imports that could break if package structure changes.\n\nUse proper workspace imports instead.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-20T10:30:55.022532-06:00","updated_at":"2026-01-20T10:37:07.746832-06:00","closed_at":"2026-01-20T10:37:07.746832-06:00","close_reason":"Closed","dependencies":[{"issue_id":"evodb-v38.2","depends_on_id":"evodb-v38","type":"parent-child","created_at":"2026-01-20T10:30:55.023329-06:00","created_by":"Nathan Clevenger"}]}
{"id":"evodb-v38.3","title":"Fix production any type in ONet loader","description":"benchmark/src/datasets/onet/loader.ts line 474:\ntype: oiRating['Element Name'] as any\n\nDefine proper union type for Element Name values instead of using any.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-20T10:30:58.692133-06:00","updated_at":"2026-01-20T10:36:58.139491-06:00","closed_at":"2026-01-20T10:36:58.139491-06:00","close_reason":"Closed","dependencies":[{"issue_id":"evodb-v38.3","depends_on_id":"evodb-v38","type":"parent-child","created_at":"2026-01-20T10:30:58.692772-06:00","created_by":"Nathan Clevenger"}]}
{"id":"evodb-v38.4","title":"Replace test file any types with proper mock types","description":"Multiple test files use any for mocking (writer.test.ts, compactor.test.ts, query-engine.test.ts).\n\nCreate proper mock types for better type safety in tests.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-20T10:31:02.115563-06:00","updated_at":"2026-01-20T10:47:47.832622-06:00","closed_at":"2026-01-20T10:47:47.832622-06:00","close_reason":"Closed","dependencies":[{"issue_id":"evodb-v38.4","depends_on_id":"evodb-v38","type":"parent-child","created_at":"2026-01-20T10:31:02.116139-06:00","created_by":"Nathan Clevenger"}]}
{"id":"evodb-v38.5","title":"Add JSDoc to complex types in query/types.ts","description":"ZoneMapColumn and other complex types in query/src/types.ts lack documentation.\n\nAdd JSDoc comments explaining purpose and usage.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-20T10:31:05.498025-06:00","updated_at":"2026-01-20T10:45:28.958673-06:00","closed_at":"2026-01-20T10:45:28.958673-06:00","close_reason":"Closed","dependencies":[{"issue_id":"evodb-v38.5","depends_on_id":"evodb-v38","type":"parent-child","created_at":"2026-01-20T10:31:05.500893-06:00","created_by":"Nathan Clevenger"}]}
{"id":"evodb-v38.6","title":"Add explicit strict flags to all tsconfig.json","description":"Some packages use only strict: true without explicit flags (noImplicitAny, strictNullChecks, etc).\n\nAdd explicit flags for consistency and clarity across all packages.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-20T10:31:09.184885-06:00","updated_at":"2026-01-20T10:40:46.84983-06:00","closed_at":"2026-01-20T10:40:46.84983-06:00","close_reason":"Closed","dependencies":[{"issue_id":"evodb-v38.6","depends_on_id":"evodb-v38","type":"parent-child","created_at":"2026-01-20T10:31:09.185486-06:00","created_by":"Nathan Clevenger"}]}